/******************************************************************************/
/*        Generated by IBExpert 2017.8.23.1 06/09/2017 01:07:50 a. m.         */
/******************************************************************************/

SET SQL DIALECT 3;

SET NAMES NONE;

CREATE DATABASE 'C:\AppData\PLAN.FDB'
USER 'SYSDBA' PASSWORD 'masterkey'
PAGE_SIZE 4096
DEFAULT CHARACTER SET NONE COLLATION NONE;



/******************************************************************************/
/*                                  Domains                                   */
/******************************************************************************/

CREATE DOMAIN BOOLEANO AS
SMALLINT
CHECK (VALUE = 0 OR VALUE = 1);

CREATE DOMAIN CADENA010 AS
VARCHAR(10) CHARACTER SET ISO8859_1;

CREATE DOMAIN CADENA030 AS
VARCHAR(30) CHARACTER SET ISO8859_1;

CREATE DOMAIN CADENA050 AS
VARCHAR(50) CHARACTER SET ISO8859_1;

CREATE DOMAIN CADENA100 AS
VARCHAR(100) CHARACTER SET ISO8859_1;

CREATE DOMAIN CADENA250 AS
VARCHAR(250) CHARACTER SET ISO8859_1;

CREATE DOMAIN CARACTER AS
CHAR(1) CHARACTER SET ISO8859_1;

CREATE DOMAIN DOBLE AS
DOUBLE PRECISION;

CREATE DOMAIN ENTERO AS
INTEGER;

CREATE DOMAIN FECHA AS
DATE;

CREATE DOMAIN GUID AS
VARCHAR(38);

CREATE DOMAIN MEMO AS
BLOB SUB_TYPE 1 SEGMENT SIZE 80 CHARACTER SET ISO8859_1;

CREATE DOMAIN MINIENTERO AS
SMALLINT;



/******************************************************************************/
/*                                   Tables                                   */
/******************************************************************************/



CREATE TABLE ACUERDOS (
    ID                     GUID NOT NULL,
    ID_PLANEACION_GENERAL  GUID NOT NULL,
    NOMBRE                 CADENA030,
    ACUERDO                MEMO,
    PARA                   CADENA100,
    SEGUIMIENTO            MEMO,
    FECHA                  FECHA
);


CREATE TABLE AREAS_CURRICULARES (
    ID_AREA_CURRICULAR  GUID NOT NULL,
    NOMBRE              CADENA030
);


CREATE TABLE ATRIBUTOS_COMPETENCIAS (
    ID                       GUID NOT NULL,
    NOMBRE                   CADENA250,
    ID_COMPETENCIA_GENERICA  GUID NOT NULL
);


CREATE TABLE CATEGORIAS_COMPETENCIAS (
    ID_CATEGORIA_COMPETENCIA  GUID NOT NULL,
    NOMBRE                    CADENA050
);


CREATE TABLE CICLOS_ESCOLARES (
    ID_CICLO_ESCOLAR    GUID NOT NULL,
    NOMBRE              CADENA010,
    ID_UNIDAD_REGIONAL  GUID NOT NULL,
    ACTIVO              BOOLEANO
);


CREATE TABLE COMPETENCIAS_DISCIPLINARES (
    ID_COMPETENCIA_DISCIPLINAR  GUID NOT NULL,
    NOMBRE                      CADENA250
);


CREATE TABLE COMPETENCIAS_GENERICAS (
    ID_COMPETENCIA_GENERICA   GUID NOT NULL,
    NOMBRE                    CADENA250,
    ID_CATEGORIA_COMPETENCIA  GUID
);


CREATE TABLE COMPONENTES_CURRICULARES (
    ID      GUID NOT NULL,
    NOMBRE  CADENA030
);


CREATE TABLE EMPLEADOS (
    ID         GUID NOT NULL,
    NOMBRE     CADENA100,
    ID_PERFIL  GUID
);


CREATE TABLE EVALUACIONES (
    ID                         GUID NOT NULL,
    ID_PLANEACION_UNIDAD       GUID NOT NULL,
    ASPECTO                    CADENA050,
    EVIDENCIA                  MEMO,
    PONDERACION                MINIENTERO,
    FECHA                      FECHA,
    ID_INSTRUMENTO_EVALUACION  GUID
);


CREATE TABLE INSTRUMENTOS_EVALUACION (
    ID      GUID NOT NULL,
    NOMBRE  CADENA050
);


CREATE TABLE LINEAS_DISCIPLINARES (
    ID                  GUID NOT NULL,
    NOMBRE              CADENA050,
    ID_AREA_CURRICULAR  GUID
);


CREATE TABLE MODALIDADES (
    ID      GUID NOT NULL,
    NOMBRE  CADENA030
);


CREATE TABLE PERFILES (
    ID      GUID NOT NULL,
    NOMBRE  CADENA030
);


CREATE TABLE PLANEACIONES_CLASES (
    ID_PLANEACION_CLASE         GUID NOT NULL,
    ID_PLANEACION_UNIDAD        GUID NOT NULL,
    SESION                      MINIENTERO,
    HORAS                       MINIENTERO,
    FECHA                       FECHA,
    CONTENIDO_TEMATICO          MEMO,
    PROPOSITO_SESION            MEMO,
    COMPETENCIAS_GENERICAS      MEMO,
    COMPETENCIAS_DISCIPLINARES  MEMO,
    SABERES_CONCEPTUALES        MEMO,
    SABERES_PROCEDIMENTALES     MEMO,
    SABERES_ACTITUDINALES       MEMO,
    ACTIVIDAD_APERTURA          MEMO,
    ACTIVIDAD_DESARROLLO        MEMO,
    ACTIVIDAD_CIERRE            MEMO,
    RECURSOS_MATERIALES         MEMO,
    OBSERVACIONES_COMENTARIOS   MEMO
);


CREATE TABLE PLANEACIONES_GENERALES (
    ID_PLANEACION_GENERAL     GUID NOT NULL,
    ID_PLAN                   GUID NOT NULL,
    ID_MODALIDAD              GUID,
    SEMESTRE                  CADENA010,
    FECHA                     FECHA,
    LUGAR                     CADENA050,
    ID_PROFESOR_COORDINADOR   GUID,
    ID_SECRETARIO_ACADEMICO   GUID,
    FECHA_INICIO              FECHA,
    FECHA_CIERRE              FECHA,
    NOMBRE_ASIGNATURA         CADENA050,
    ID_COMPONENTE_CURRICULAR  GUID,
    HORAS_CURSO               MINIENTERO,
    HORAS_SEMANA              MINIENTERO,
    ID_AREA_CURRICULAR        GUID,
    ID_LINEA_DISCIPLINAR      GUID,
    PROPOSITO_GENERAL         MEMO,
    EVIDENCIA_INTEGRADORA     CADENA050,
    ORIENTACIONES_GENERALES   MEMO
);


CREATE TABLE PLANEACIONES_UNIDADES (
    ID_PLANEACION_UNIDAD           GUID NOT NULL,
    ID_PLANEACION_GENERAL          GUID NOT NULL,
    NOMBRE                         CADENA100,
    PROPOSITO_UNIDAD               MEMO,
    RECURSOS                       MEMO,
    ESTRATEGIAS_DIDACTICAS         MEMO,
    ESTRATEGIAS_RETROALIMENTACION  MEMO,
    HORAS                          MINIENTERO,
    SABERES_CONCEPTUALES           MEMO,
    SABERES_PROCEDIMENTALES        MEMO,
    SABERES_ACTITUDINALES          MEMO,
    CONTENIDO_TEMATICO             MEMO
);


CREATE TABLE PLANES (
    ID_PLAN           GUID NOT NULL,
    NOMBRE            CADENA010,
    ID_CICLO_ESCOLAR  GUID NOT NULL
);


CREATE TABLE PROFESORES (
    ID      GUID NOT NULL,
    NOMBRE  CADENA100,
    PERFIL  MINIENTERO
);


CREATE TABLE PROFESORES_PARTICIPANTES (
    ID                     GUID NOT NULL,
    ID_PLANEACION_GENERAL  GUID NOT NULL,
    ID_PROFESOR            GUID,
    GRUPOS                 CADENA050
);


CREATE TABLE REUNIONES (
    ID                     GUID NOT NULL,
    ID_PLANEACION_GENERAL  GUID NOT NULL,
    NOMBRE                 CADENA030,
    PROPOSITO              MEMO,
    FECHA                  FECHA
);


CREATE TABLE SECRETARIOS_ACADEMICOS (
    ID      GUID NOT NULL,
    NOMBRE  CADENA100
);


CREATE TABLE UNIDADES_ACADEMICAS (
    ID                  GUID NOT NULL,
    NOMBRE              CADENA100,
    ID_UNIDAD_REGIONAL  GUID NOT NULL
);


CREATE TABLE UNIDADES_ATRIBUTOS (
    ID_UNIDAD_ATRIBUTO       GUID NOT NULL,
    ID_PLANEACION_UNIDAD     GUID,
    ID_ATRIBUTO_COMPETENCIA  GUID,
    CRITERIOS_APRENDIZAJE    MEMO
);


CREATE TABLE UNIDADES_COMPETENCIAS (
    ID_UNIDAD_COMPETENCIA       GUID NOT NULL,
    ID_PLANEACION_UNIDAD        GUID,
    ID_COMPETENCIA_DISCIPLINAR  GUID,
    CRITERIOS_APRENDIZAJE       MEMO
);


CREATE TABLE UNIDADES_REGIONALES (
    ID_UNIDAD_REGIONAL  GUID NOT NULL,
    NOMBRE              CADENA030
);




/******************************************************************************/
/*                                Primary keys                                */
/******************************************************************************/

ALTER TABLE ACUERDOS ADD CONSTRAINT PK_ACUERDOS PRIMARY KEY (ID);
ALTER TABLE AREAS_CURRICULARES ADD CONSTRAINT PK_AREAS_CURRICULARES PRIMARY KEY (ID_AREA_CURRICULAR);
ALTER TABLE ATRIBUTOS_COMPETENCIAS ADD CONSTRAINT PK_ATRIBUTOS_COMPETENCIAS PRIMARY KEY (ID);
ALTER TABLE CATEGORIAS_COMPETENCIAS ADD CONSTRAINT PK_CATEGORIAS_COMPETENCIAS PRIMARY KEY (ID_CATEGORIA_COMPETENCIA);
ALTER TABLE CICLOS_ESCOLARES ADD CONSTRAINT PK_CICLOS_ESCOLARES PRIMARY KEY (ID_CICLO_ESCOLAR);
ALTER TABLE COMPETENCIAS_DISCIPLINARES ADD CONSTRAINT PK_COMPETENCIAS_DISCIPLINARES PRIMARY KEY (ID_COMPETENCIA_DISCIPLINAR);
ALTER TABLE COMPETENCIAS_GENERICAS ADD CONSTRAINT PK_COMPETENCIAS_GENERICAS PRIMARY KEY (ID_COMPETENCIA_GENERICA);
ALTER TABLE COMPONENTES_CURRICULARES ADD CONSTRAINT PK_COMPONENTES_CURRICULARES PRIMARY KEY (ID);
ALTER TABLE EMPLEADOS ADD CONSTRAINT PK_EMPLEADOS PRIMARY KEY (ID);
ALTER TABLE EVALUACIONES ADD CONSTRAINT PK_EVALUACIONES PRIMARY KEY (ID);
ALTER TABLE INSTRUMENTOS_EVALUACION ADD CONSTRAINT PK_INSTRUMENTOS_EVALUACION_0 PRIMARY KEY (ID);
ALTER TABLE LINEAS_DISCIPLINARES ADD CONSTRAINT PK_LINEAS_DISCIPLINARES PRIMARY KEY (ID);
ALTER TABLE MODALIDADES ADD CONSTRAINT PK_MODALIDADES PRIMARY KEY (ID);
ALTER TABLE PERFILES ADD CONSTRAINT PK_PERFILES PRIMARY KEY (ID);
ALTER TABLE PLANEACIONES_CLASES ADD CONSTRAINT PK_PLANEACIONES_CLASES PRIMARY KEY (ID_PLANEACION_CLASE);
ALTER TABLE PLANEACIONES_GENERALES ADD CONSTRAINT PK_PLANEACIONES_GENERALES PRIMARY KEY (ID_PLANEACION_GENERAL);
ALTER TABLE PLANEACIONES_UNIDADES ADD CONSTRAINT PK_PLANEACIONES_UNIDADES PRIMARY KEY (ID_PLANEACION_UNIDAD);
ALTER TABLE PLANES ADD CONSTRAINT PK_PLANES PRIMARY KEY (ID_PLAN);
ALTER TABLE PROFESORES ADD CONSTRAINT PK_PROFESORES PRIMARY KEY (ID);
ALTER TABLE PROFESORES_PARTICIPANTES ADD CONSTRAINT PK_PROFESORES_PARTICIPANTES PRIMARY KEY (ID);
ALTER TABLE REUNIONES ADD CONSTRAINT PK_REUNIONES PRIMARY KEY (ID);
ALTER TABLE SECRETARIOS_ACADEMICOS ADD CONSTRAINT PK_SECRETARIOS_ACADEMICOS PRIMARY KEY (ID);
ALTER TABLE UNIDADES_ACADEMICAS ADD CONSTRAINT PK_UNIDADES_ACADEMICAS PRIMARY KEY (ID);
ALTER TABLE UNIDADES_ATRIBUTOS ADD CONSTRAINT PK_UNIDADES_ATRIBUTOS PRIMARY KEY (ID_UNIDAD_ATRIBUTO);
ALTER TABLE UNIDADES_COMPETENCIAS ADD CONSTRAINT PK_UNIDADES_COMPETENCIAS PRIMARY KEY (ID_UNIDAD_COMPETENCIA);
ALTER TABLE UNIDADES_REGIONALES ADD CONSTRAINT PK_UNIDADES_REGIONALES PRIMARY KEY (ID_UNIDAD_REGIONAL);


/******************************************************************************/
/*                                Foreign keys                                */
/******************************************************************************/

ALTER TABLE ACUERDOS ADD CONSTRAINT FK_ACUERDOS_1 FOREIGN KEY (ID_PLANEACION_GENERAL) REFERENCES PLANEACIONES_GENERALES (ID_PLANEACION_GENERAL) ON DELETE CASCADE ON UPDATE CASCADE;
ALTER TABLE ATRIBUTOS_COMPETENCIAS ADD CONSTRAINT FK_ATRIBUTOS_COMPETENCIAS_1 FOREIGN KEY (ID_COMPETENCIA_GENERICA) REFERENCES COMPETENCIAS_GENERICAS (ID_COMPETENCIA_GENERICA) ON DELETE CASCADE ON UPDATE CASCADE;
ALTER TABLE CICLOS_ESCOLARES ADD CONSTRAINT FK_CICLOS_ESCOLARES_1 FOREIGN KEY (ID_UNIDAD_REGIONAL) REFERENCES UNIDADES_REGIONALES (ID_UNIDAD_REGIONAL) ON DELETE CASCADE ON UPDATE CASCADE;
ALTER TABLE COMPETENCIAS_GENERICAS ADD CONSTRAINT FK_COMPETENCIAS_GENERICAS_1 FOREIGN KEY (ID_CATEGORIA_COMPETENCIA) REFERENCES CATEGORIAS_COMPETENCIAS (ID_CATEGORIA_COMPETENCIA) ON UPDATE CASCADE;
ALTER TABLE EMPLEADOS ADD CONSTRAINT FK_EMPLEADOS_1 FOREIGN KEY (ID_PERFIL) REFERENCES PERFILES (ID) ON UPDATE CASCADE;
ALTER TABLE EVALUACIONES ADD CONSTRAINT FK_EVALUACIONES_0 FOREIGN KEY (ID_INSTRUMENTO_EVALUACION) REFERENCES INSTRUMENTOS_EVALUACION (ID) ON DELETE NO ACTION ON UPDATE CASCADE;
ALTER TABLE EVALUACIONES ADD CONSTRAINT FK_EVALUACIONES_1 FOREIGN KEY (ID_PLANEACION_UNIDAD) REFERENCES PLANEACIONES_UNIDADES (ID_PLANEACION_UNIDAD) ON DELETE CASCADE ON UPDATE CASCADE;
ALTER TABLE LINEAS_DISCIPLINARES ADD CONSTRAINT FK_LINEAS_DISCIPLINARES_1 FOREIGN KEY (ID_AREA_CURRICULAR) REFERENCES AREAS_CURRICULARES (ID_AREA_CURRICULAR) ON DELETE CASCADE ON UPDATE CASCADE;
ALTER TABLE PLANEACIONES_CLASES ADD CONSTRAINT FK_PLANEACIONES_CLASES_1 FOREIGN KEY (ID_PLANEACION_UNIDAD) REFERENCES PLANEACIONES_UNIDADES (ID_PLANEACION_UNIDAD) ON DELETE CASCADE ON UPDATE CASCADE;
ALTER TABLE PLANEACIONES_GENERALES ADD CONSTRAINT FK_PLANEACIONES_GENERALES_1 FOREIGN KEY (ID_PLAN) REFERENCES PLANES (ID_PLAN) ON DELETE CASCADE ON UPDATE CASCADE;
ALTER TABLE PLANEACIONES_GENERALES ADD CONSTRAINT FK_PLANEACIONES_GENERALES_3 FOREIGN KEY (ID_MODALIDAD) REFERENCES MODALIDADES (ID) ON UPDATE CASCADE;
ALTER TABLE PLANEACIONES_GENERALES ADD CONSTRAINT FK_PLANEACIONES_GENERALES_7 FOREIGN KEY (ID_COMPONENTE_CURRICULAR) REFERENCES COMPONENTES_CURRICULARES (ID) ON UPDATE CASCADE;
ALTER TABLE PLANEACIONES_GENERALES ADD CONSTRAINT FK_PLANEACIONES_GENERALES_9 FOREIGN KEY (ID_LINEA_DISCIPLINAR) REFERENCES LINEAS_DISCIPLINARES (ID) ON UPDATE CASCADE;
ALTER TABLE PLANEACIONES_UNIDADES ADD CONSTRAINT FK_PLANEACIONES_UNIDADES_1 FOREIGN KEY (ID_PLANEACION_GENERAL) REFERENCES PLANEACIONES_GENERALES (ID_PLANEACION_GENERAL) ON DELETE CASCADE ON UPDATE CASCADE;
ALTER TABLE PLANES ADD CONSTRAINT FK_PLANES_1 FOREIGN KEY (ID_CICLO_ESCOLAR) REFERENCES CICLOS_ESCOLARES (ID_CICLO_ESCOLAR) ON DELETE CASCADE ON UPDATE CASCADE;
ALTER TABLE PROFESORES_PARTICIPANTES ADD CONSTRAINT FK_PROFESORES_PARTICIPANTES_1 FOREIGN KEY (ID_PLANEACION_GENERAL) REFERENCES PLANEACIONES_GENERALES (ID_PLANEACION_GENERAL) ON DELETE CASCADE ON UPDATE CASCADE;
ALTER TABLE REUNIONES ADD CONSTRAINT FK_REUNIONES_1 FOREIGN KEY (ID_PLANEACION_GENERAL) REFERENCES PLANEACIONES_GENERALES (ID_PLANEACION_GENERAL) ON DELETE CASCADE ON UPDATE CASCADE;
ALTER TABLE UNIDADES_ACADEMICAS ADD CONSTRAINT FK_UNIDADES_ACADEMICAS_1 FOREIGN KEY (ID_UNIDAD_REGIONAL) REFERENCES UNIDADES_REGIONALES (ID_UNIDAD_REGIONAL) ON DELETE CASCADE ON UPDATE CASCADE;
ALTER TABLE UNIDADES_ATRIBUTOS ADD CONSTRAINT FK_UNIDADES_ATRIBUTOS_1 FOREIGN KEY (ID_ATRIBUTO_COMPETENCIA) REFERENCES ATRIBUTOS_COMPETENCIAS (ID) ON UPDATE CASCADE;
ALTER TABLE UNIDADES_ATRIBUTOS ADD CONSTRAINT FK_UNIDADES_ATRIBUTOS_2 FOREIGN KEY (ID_PLANEACION_UNIDAD) REFERENCES PLANEACIONES_UNIDADES (ID_PLANEACION_UNIDAD) ON DELETE CASCADE ON UPDATE CASCADE;
ALTER TABLE UNIDADES_COMPETENCIAS ADD CONSTRAINT FK_UNIDADES_COMPETENCIAS_1 FOREIGN KEY (ID_COMPETENCIA_DISCIPLINAR) REFERENCES COMPETENCIAS_DISCIPLINARES (ID_COMPETENCIA_DISCIPLINAR) ON UPDATE CASCADE;
ALTER TABLE UNIDADES_COMPETENCIAS ADD CONSTRAINT FK_UNIDADES_COMPETENCIAS_2 FOREIGN KEY (ID_PLANEACION_UNIDAD) REFERENCES PLANEACIONES_UNIDADES (ID_PLANEACION_UNIDAD) ON DELETE CASCADE ON UPDATE CASCADE;
