/******************************************************************************/
/*         Generated by IBExpert 2017.1.25.1 25/08/2017 01:13:57 a.m.         */
/******************************************************************************/

SET SQL DIALECT 3;

SET NAMES NONE;

SET CLIENTLIB 'C:\Program Files (x86)\Firebird\Firebird_2_5\bin\fbclient.dll';

CREATE DATABASE '127.0.0.1/3050:C:\AppData\PLAN.FDB'
USER 'SYSDBA' PASSWORD 'masterkey'
PAGE_SIZE 4096
DEFAULT CHARACTER SET NONE COLLATION NONE;



/******************************************************************************/
/*                                  Domains                                   */
/******************************************************************************/

CREATE DOMAIN BOOLEANO AS
SMALLINT
CHECK (VALUE = 0 OR VALUE = 1);

CREATE DOMAIN CADENA010 AS
VARCHAR(10);

CREATE DOMAIN CADENA030 AS
VARCHAR(30);

CREATE DOMAIN CADENA050 AS
VARCHAR(50);

CREATE DOMAIN CADENA100 AS
VARCHAR(100);

CREATE DOMAIN CADENA250 AS
VARCHAR(250);

CREATE DOMAIN CARACTER AS
CHAR(1);

CREATE DOMAIN DOBLE AS
DOUBLE PRECISION;

CREATE DOMAIN ENTERO AS
INTEGER;

CREATE DOMAIN FECHA AS
DATE;

CREATE DOMAIN GUID AS
VARCHAR(38);

CREATE DOMAIN MINIENTERO AS
SMALLINT;



/******************************************************************************/
/*                                   Tables                                   */
/******************************************************************************/



CREATE TABLE ACUERDOS (
    ID                     GUID NOT NULL,
    ID_PLANEACION_GENERAL  GUID,
    NOMBRE                 CADENA030,
    ACUERDO                CADENA250,
    PARA                   CADENA100,
    SEGUIMIENTO            CADENA250,
    FECHA                  FECHA
);


CREATE TABLE AREAS_CURRICULARES (
    ID      GUID NOT NULL,
    NOMBRE  CADENA030
);


CREATE TABLE CICLOS_ESCOLARES (
    ID      GUID NOT NULL,
    NOMBRE  CADENA010
);


CREATE TABLE COMPETENCIAS_DISCIPLINARES (
    ID                    GUID NOT NULL,
    ID_PLANEACION_CLASE   GUID,
    NOMBRE                CADENA100,
    CRITERIO_APRENDIZAJE  CADENA100
);


CREATE TABLE COMPETENCIAS_GENERICAS (
    ID                    GUID NOT NULL,
    ID_PLANEACION_CLASE   GUID,
    NOMBRE                CADENA100,
    CRITERIO_APRENDIZAJE  CADENA100
);


CREATE TABLE COMPONENTES_CURRICULARES (
    ID      GUID NOT NULL,
    NOMBRE  CADENA030
);


CREATE TABLE EVALUACIONES (
    ID                         GUID NOT NULL,
    ID_PLANEACION_UNIDAD       GUID,
    ASPECTO                    CADENA050,
    EVIDENCIA                  CADENA250,
    PONDERACION                MINIENTERO,
    FECHA                      FECHA,
    ID_INSTRUMENTO_EVALUACION  GUID
);


CREATE TABLE INSTRUMENTOS_EVALUACION (
    ID      GUID NOT NULL,
    NOMBRE  CADENA050
);


CREATE TABLE LINEAS_DISCIPLINARES (
    ID      GUID NOT NULL,
    NOMBRE  CADENA030
);


CREATE TABLE MODALIDADES (
    ID      GUID NOT NULL,
    NOMBRE  CADENA030
);


CREATE TABLE PLANEACIONES_CLASES (
    ID_PLANEACION_CLASE        GUID NOT NULL,
    ID_PLANEACION_UNIDAD       GUID,
    SESION                     MINIENTERO,
    HORAS                      MINIENTERO,
    FECHA                      FECHA,
    CONTENIDO_TEMATICO         CADENA250,
    PROPOSITO_SESION           CADENA100,
    SABERES_CONCEPTUALES       CADENA100,
    SABERES_PROCEDIMENTALES    CADENA100,
    SABERES_ACTITUDINALES      CADENA100,
    ACTIVIDAD_APERTURA         CADENA050,
    ACTIVIDAD_DESARROLLO       CADENA050,
    ACTIVIDAD_CIERRE           CADENA050,
    RECURSOS_MATERIALES        CADENA050,
    OBSERVACIONES_COMENTARIOS  CADENA250
);


CREATE TABLE PLANEACIONES_GENERALES (
    ID_PLANEACION_GENERAL     GUID NOT NULL,
    ID_UNIDAD_ACADEMICA       GUID,
    ID_PLAN                   GUID,
    ID_MODALIDAD              GUID,
    ID_CICLO_ESCOLAR          GUID,
    SEMESTRE                  CADENA010,
    FECHA                     FECHA,
    LUGAR                     CADENA050,
    ID_PROFESOR_COORDINADOR   GUID,
    ID_SECRETARIO_ACADEMICO   GUID,
    FECHA_INICIO              FECHA,
    FECHA_CIERRE              FECHA,
    NOMBRE_ASIGNATURA         CADENA050,
    ID_COMPONENTE_CURRICULAR  GUID,
    HORAS_CURSO               MINIENTERO,
    HORAS_SEMANA              MINIENTERO,
    ID_AREA_CURRICULAR        GUID,
    ID_LINEA_DISCIPLINAR      GUID,
    PROPOSITO_GENERAL         CADENA250,
    EVIDENCIA_INTEGRADORA     CADENA050,
    ORIENTACIONES_GENERALES   CADENA050
);


CREATE TABLE PLANEACIONES_UNIDADES (
    ID_PLANEACION_UNIDAD           GUID NOT NULL,
    ID_PLANEACION_GENERAL          GUID,
    NOMBRE                         CADENA100,
    PROPOSITO_UNIDAD               CADENA250,
    RECURSOS                       CADENA250,
    ESTRATEGIAS_RETROALIMENTACION  CADENA100,
    HORAS_PROGRAMADAS              ENTERO,
    HORAS_PLANEADAS                ENTERO
);


CREATE TABLE PLANES (
    ID      GUID NOT NULL,
    NOMBRE  CADENA010
);


CREATE TABLE PROFESORES (
    ID      GUID NOT NULL,
    NOMBRE  CADENA100
);


CREATE TABLE PROFESORES_PARTICIPANTES (
    ID                     GUID NOT NULL,
    ID_PLANEACION_GENERAL  GUID,
    ID_PROFESOR            GUID,
    GRUPOS                 CADENA050
);


CREATE TABLE REUNIONES (
    ID                     GUID NOT NULL,
    ID_PLANEACION_GENERAL  GUID,
    NOMBRE                 CADENA030,
    PROPOSITO              CADENA250,
    FECHA                  FECHA
);


CREATE TABLE SECRETARIOS_ACADEMICOS (
    ID      GUID NOT NULL,
    NOMBRE  CADENA100
);


CREATE TABLE UNIDADES_ACADEMICAS (
    ID      GUID NOT NULL,
    NOMBRE  CADENA100
);




/******************************************************************************/
/*                                Primary keys                                */
/******************************************************************************/

ALTER TABLE ACUERDOS ADD CONSTRAINT PK_ACUERDOS PRIMARY KEY (ID);
ALTER TABLE AREAS_CURRICULARES ADD CONSTRAINT PK_AREAS_CURRICULARES PRIMARY KEY (ID);
ALTER TABLE CICLOS_ESCOLARES ADD CONSTRAINT PK_CICLOS_ESCOLARES PRIMARY KEY (ID);
ALTER TABLE COMPETENCIAS_DISCIPLINARES ADD CONSTRAINT PK_COMPETENCIAS_DISCIPLINARES PRIMARY KEY (ID);
ALTER TABLE COMPETENCIAS_GENERICAS ADD CONSTRAINT PK_COMPETENCIAS_GENERICAS PRIMARY KEY (ID);
ALTER TABLE COMPONENTES_CURRICULARES ADD CONSTRAINT PK_COMPONENTES_CURRICULARES PRIMARY KEY (ID);
ALTER TABLE EVALUACIONES ADD CONSTRAINT PK_EVALUACIONES PRIMARY KEY (ID);
ALTER TABLE INSTRUMENTOS_EVALUACION ADD CONSTRAINT PK_INSTRUMENTOS_EVALUACION_0 PRIMARY KEY (ID);
ALTER TABLE LINEAS_DISCIPLINARES ADD CONSTRAINT PK_LINEAS_DISCIPLINARES PRIMARY KEY (ID);
ALTER TABLE MODALIDADES ADD CONSTRAINT PK_MODALIDADES PRIMARY KEY (ID);
ALTER TABLE PLANEACIONES_CLASES ADD CONSTRAINT PK_PLANEACIONES_CLASES PRIMARY KEY (ID_PLANEACION_CLASE);
ALTER TABLE PLANEACIONES_GENERALES ADD CONSTRAINT PK_PLANEACIONES_GENERALES PRIMARY KEY (ID_PLANEACION_GENERAL);
ALTER TABLE PLANEACIONES_UNIDADES ADD CONSTRAINT PK_PLANEACIONES_UNIDADES PRIMARY KEY (ID_PLANEACION_UNIDAD);
ALTER TABLE PLANES ADD CONSTRAINT PK_PLANES PRIMARY KEY (ID);
ALTER TABLE PROFESORES ADD CONSTRAINT PK_PROFESORES PRIMARY KEY (ID);
ALTER TABLE PROFESORES_PARTICIPANTES ADD CONSTRAINT PK_PROFESORES_PARTICIPANTES PRIMARY KEY (ID);
ALTER TABLE REUNIONES ADD CONSTRAINT PK_REUNIONES PRIMARY KEY (ID);
ALTER TABLE SECRETARIOS_ACADEMICOS ADD CONSTRAINT PK_SECRETARIOS_ACADEMICOS PRIMARY KEY (ID);
ALTER TABLE UNIDADES_ACADEMICAS ADD CONSTRAINT PK_UNIDADES_ACADEMICAS PRIMARY KEY (ID);


/******************************************************************************/
/*                                Foreign keys                                */
/******************************************************************************/

ALTER TABLE ACUERDOS ADD CONSTRAINT FK_ACUERDOS_1 FOREIGN KEY (ID_PLANEACION_GENERAL) REFERENCES PLANEACIONES_GENERALES (ID_PLANEACION_GENERAL) ON DELETE CASCADE ON UPDATE CASCADE;
ALTER TABLE EVALUACIONES ADD CONSTRAINT FK_EVALUACIONES_0 FOREIGN KEY (ID_INSTRUMENTO_EVALUACION) REFERENCES INSTRUMENTOS_EVALUACION (ID) ON DELETE NO ACTION ON UPDATE CASCADE;
ALTER TABLE EVALUACIONES ADD CONSTRAINT FK_EVALUACIONES_1 FOREIGN KEY (ID_PLANEACION_UNIDAD) REFERENCES PLANEACIONES_UNIDADES (ID_PLANEACION_UNIDAD) ON DELETE CASCADE ON UPDATE CASCADE;
ALTER TABLE PLANEACIONES_CLASES ADD CONSTRAINT FK_PLANEACIONES_CLASES_1 FOREIGN KEY (ID_PLANEACION_UNIDAD) REFERENCES PLANEACIONES_UNIDADES (ID_PLANEACION_UNIDAD) ON DELETE CASCADE ON UPDATE CASCADE;
ALTER TABLE PLANEACIONES_GENERALES ADD CONSTRAINT FK_PLANEACIONES_GENERALES_1 FOREIGN KEY (ID_UNIDAD_ACADEMICA) REFERENCES UNIDADES_ACADEMICAS (ID) ON UPDATE CASCADE;
ALTER TABLE PLANEACIONES_GENERALES ADD CONSTRAINT FK_PLANEACIONES_GENERALES_2 FOREIGN KEY (ID_PLAN) REFERENCES PLANES (ID) ON UPDATE CASCADE;
ALTER TABLE PLANEACIONES_GENERALES ADD CONSTRAINT FK_PLANEACIONES_GENERALES_3 FOREIGN KEY (ID_MODALIDAD) REFERENCES MODALIDADES (ID) ON UPDATE CASCADE;
ALTER TABLE PLANEACIONES_GENERALES ADD CONSTRAINT FK_PLANEACIONES_GENERALES_4 FOREIGN KEY (ID_CICLO_ESCOLAR) REFERENCES CICLOS_ESCOLARES (ID) ON UPDATE CASCADE;
ALTER TABLE PLANEACIONES_GENERALES ADD CONSTRAINT FK_PLANEACIONES_GENERALES_5 FOREIGN KEY (ID_PROFESOR_COORDINADOR) REFERENCES PROFESORES (ID) ON UPDATE CASCADE;
ALTER TABLE PLANEACIONES_GENERALES ADD CONSTRAINT FK_PLANEACIONES_GENERALES_6 FOREIGN KEY (ID_SECRETARIO_ACADEMICO) REFERENCES SECRETARIOS_ACADEMICOS (ID) ON UPDATE CASCADE;
ALTER TABLE PLANEACIONES_GENERALES ADD CONSTRAINT FK_PLANEACIONES_GENERALES_7 FOREIGN KEY (ID_COMPONENTE_CURRICULAR) REFERENCES COMPONENTES_CURRICULARES (ID) ON UPDATE CASCADE;
ALTER TABLE PLANEACIONES_GENERALES ADD CONSTRAINT FK_PLANEACIONES_GENERALES_8 FOREIGN KEY (ID_AREA_CURRICULAR) REFERENCES AREAS_CURRICULARES (ID) ON UPDATE CASCADE;
ALTER TABLE PLANEACIONES_GENERALES ADD CONSTRAINT FK_PLANEACIONES_GENERALES_9 FOREIGN KEY (ID_LINEA_DISCIPLINAR) REFERENCES LINEAS_DISCIPLINARES (ID) ON UPDATE CASCADE;
ALTER TABLE PLANEACIONES_UNIDADES ADD CONSTRAINT FK_PLANEACIONES_UNIDADES_1 FOREIGN KEY (ID_PLANEACION_GENERAL) REFERENCES PLANEACIONES_GENERALES (ID_PLANEACION_GENERAL) ON DELETE CASCADE ON UPDATE CASCADE;
ALTER TABLE PROFESORES_PARTICIPANTES ADD CONSTRAINT FK_PROFESORES_PARTICIPANTES_1 FOREIGN KEY (ID_PLANEACION_GENERAL) REFERENCES PLANEACIONES_GENERALES (ID_PLANEACION_GENERAL) ON DELETE CASCADE ON UPDATE CASCADE;
ALTER TABLE PROFESORES_PARTICIPANTES ADD CONSTRAINT FK_PROFESORES_PARTICIPANTES_2 FOREIGN KEY (ID_PROFESOR) REFERENCES PROFESORES (ID) ON UPDATE CASCADE;
ALTER TABLE REUNIONES ADD CONSTRAINT FK_REUNIONES_1 FOREIGN KEY (ID_PLANEACION_GENERAL) REFERENCES PLANEACIONES_GENERALES (ID_PLANEACION_GENERAL) ON DELETE CASCADE ON UPDATE CASCADE;
